\maketitle{}
\section{ Unit Testing Component using Apollo }

Unit testing an app which has a DOM, is always a very difficult process. For
instance, one can be familiar with how a certain technology should be stubbed.
However, how one goes ahead and does so, is unique to that specific technology.
With regards to UI, frameworks currently tend to change very quickly. In
addition, thrre are many different frameworks, many of which use different
testing frameworks. It goes without saying, if I have a chance to learn
something and document it with regards to unit testing, it would be my honor to
do so.

In particular, with regards to the Angular Apollo Client. Until recently
(pre v1.1.0), using Apollo in an Angular App, was a very cumbersome ordeal.
In particular, there was no testing module. One would have to spin it up
themselves. However, now that we are dealing with v1.1.0, there is an official
testing suite set up.

\subsection { Re-visiting Component using Apollo }
First let's look at your standard Angular component generated by the Angular
CLI.

\begin{lstlisting}
import { Component, OnInit } from '@angular/core';

@Component({
  selector: 'ill-color-picker',
  templateUrl: './ill-color-picker.component.html',
  styleUrls: ['./ill-color-picker.component.scss']
})
export class IllColorPickerComponent implements OnInit {

  constructor() { }

  ngOnInit() {
  }

}
\end{lstlisting}

\subsection { Integrate Apollo with Component }

\begin{lstlisting}

+ import { Apollo } from 'apollo-angular';

+  ngOnInit() {
+    this.apollo
+      .query({
+        query: gql`
+          colors
+        `,
+      })
+      .subscribe((initialData: any) => {
+      });
+  }
\end{lstlisting}

\subsection { Unit testing Apollo }
First let's analyze what your generic Angular CLI generated spec will look like:
\begin{lstlisting}
import { async, ComponentFixture, TestBed } from '@angular/core/testing';

import { IllColorPickerComponent } from './ill-color-picker.component';

describe('IllColorPickerComponent', () => {
  let component: IllColorPickerComponent;
  let fixture: ComponentFixture<IllColorPickerComponent>;

  beforeEach(async(() => {
    TestBed.configureTestingModule({
      declarations: [ IllColorPickerComponent ]
    })
    .compileComponents();
  }));

  beforeEach(() => {
    fixture = TestBed.createComponent(IllColorPickerComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () => {
    expect(component).toBeTruthy();
  });
});

\end{lstlisting}

\subsection { Adding Apollo Testing Module }

\begin{lstlisting}
import {ApolloTestingModule} from 'apollo-angular/testing';
//..
+ ApolloTestingModule,
//..
\end{lstlisting}
