\maketitle{}
\section{ Apollo Client Middleware }

Middleware in general is a concept in many different plugins. In general, it
means a service layer one can put on top of application in question. In
particular, for an Apollo application, it will allow us to intercept the
current request, and put in whatever we want.

\subsection{ Middleware as Architecture }
Middleware can be considered architecture, because some plugins may not support
middleware. In addition, even if they do support middleware, it might not be so
apparent from documentation how one might go ahead and do so. So much so to the
extent, that it will considerably slow down development, and a conversation will
have to be had if research is worth it.

\subsection{ Middleware in Apollo }
Apollo has a number of quirks with regards to it's middleware. For now, it adds
typename to every query request. This can cause issues when it comes to unit
testing. Let's create middleware to remove typename from the app:
\begin{lstlisting}
const stripTypenameMiddleware = new ApolloLink((operation, forward) => {
  if (operation.variables) {
    operation.variables = omitDeep(operation.variables, '__typename');
  }

  return forward(operation);
});
\end{lstlisting}

Here we are stripping typename from the application. 
