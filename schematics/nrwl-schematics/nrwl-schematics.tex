
\section{ Nrwl Schematics }

We have gone into a deep dive with regards to creating custom schematics.
However, being that we are working with Nrwl schematics, there is a slightly
easier way for us to set up custom schematics within our app. It does tighly
couple our schematics with nrwl schematics, and for that reason I didn't like
it at first. However, after thinking about it, re-factoring the schematics to
be custom schematics wouldn't be the worst thing to happen.

In the previous chapters we created a schematic called the px-schematics. All it
did was generate files. For this task, we decided to go ahead and create our own
custom angular schematics. However, let's say we wanted to create our own
custom schematics, that made use of one of schematics nrwl already has available
for us, then it would definitely make sense to use the Workspace Specific
Schematics.

\subsection{ Workspace Specific Schematics }
\subsubsection{Generate a workspace specific schematic}
\begin{verbatim}
ng g workspace-schematic data-access
\end{verbatim}

Go to /tools/schematics/data-access/index.ts, where we will add in our custom
code.

\subsubsection{ Adding in External Schematics}
\begin{lstlisting}
externalSchematic('@nrwl/schematics', 'lib', {
  name: name,
  directory: schema.directory,
  tags: schema.directory ? `state, ${schema.directory}` : 'state, aero',
}),
externalSchematic('@nrwl/schematics', 'ngrx', {
  name: name,
  module,
  directory: '+state',
  facade: true,
}),
externalSchematic('@schematics/angular', 'service', {
  name: name,
  path: 'data-access',
  sourceDir: normalize(sourceDir),
  directory: schema.directory,
  app: schema.name,
}),
externalSchematic('@schematics/angular', 'interface', {
  name: name,
  path: 'data-access',
  sourceDir: normalize(sourceDir),
  directory: schema.directory,
  app: schema.name,
}),
\end{lstlisting}

First we include lib, so that we can choose which directory our schematics
should go in. Next we include ngrx, so that state is automatically generated
when we create a data-access. As part of our data access, we would like to
create a service as well, that will act as our liason between our GraphQL
requests, and our actual app. In addition, we will be creating an interface
file that will be used across all parts of our app. \footnote{Feel free to refer
back to the chapter on interfaces.}

\subsubsection{ Adding GraphQL Files }
One of the wonderful things about the Angular ecosystem, that schematics,
follows, is the amount of cookie cutter code. Creating your own schematics at
first can be daunting, however, the more we deep dive, we will find that we have
learnt the bulk of scheamtics. That is file generation and templating.
