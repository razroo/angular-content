\chapter{ Ahead Of Time Compilation }
Angular uses Typescript. The structure uses directives, components, \lstinline{@Input()}'s and \lstinline{@Output}'s. So, when one thinks about it, you start to realize, "hey! Is Angular compiling it to browser ready HTML and JavaScript for me"? 

The answer to this question, is yes. 

How Angular does that cannot be entirely controlled, as that is handled by the internals of the framework. However, the real question that we should be asking ourselves is when does this happen?

\section{Exploring Ahead of Time Compilation}
Without using the ahead-of-time compilation flag \lstinline{--aot} i.e. 
\begin{verbatim}
ng serve
\end{verbatim}

Angular will convert the code from Angular code to browser readable code at run time. By using the \lstinline{--aot} compiler i.e.
\begin{verbatim}
ng serve --aot
\end{verbatim}

The Angular compiler will compile the code at build time. The benefits of compiling the code at build time are as follows: 
\begin{enumerate}
\item Faster rendering - Browser doesn't have to compile code first
\item Fewer Requests - The compiler will inline external html and css.
\item Smaller bundle sizes - Angular Compiler not included in bundle size. 
\item Template errors - They happen inside of compiler, instead of at runtime.
\item Better security - HTML and Components(css included), are compiled into 
Javascript before the webpage loads. Preventing against many different types
of injections. 
\end{enumerate}

The internals are somewhat complex, and the Angular documentation does a reallygood job at discussing what that is. From a practical perspective, let's discuss the expression limitations. I will admit, at this time, why there are these limitations is beyond me. 

\section{Expression Syntax Limitations}
The AOT collector only understands a subset of JavaScript. It's quite a long list. Therefore, when using the \lstinline{--aot} flag, and the AOT compiler comes across something it doesn't understand, it will throw the error into the \lstinline{.metadata.json}. 

If it needs that piece of code to generate the application code, the compiler will complain. (However, I have personally found that there are scenarios wherein the AOT compiler will say that things are working as expected, but it won't actually work). 

The \lstinline{ng serve} will go through as usual, but it will fail silently in the form of it not appearing on the site. The easiest way to be aware ofthe limitations is to change the config in your \lstinline{angularCompilerOptions}. 

\begin{lstlisting}
"angularCompilerOptions": {
  ...
  "strictMetadataEmit" : true
}  
\end{lstlisting}

By changing the \lstinline{strictMetadataEmit} to \lstinline{true}, it willemit an error to the console directly, when using the \lstinline{--aot} flag.\mybox{It should be noted that in this book we reccomend the use of Nrwl Nx. Nrwl Nx when creating a library, will by default add the \lstinline{"strictMetadataEmit": true}} Sometimes the compiler will throw code that it cannot read into an AST. 